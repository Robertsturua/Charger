<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Information Form</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 760px; margin: 40px auto; padding: 0 16px; }
    label { display:block; margin-top: 12px; font-weight: 600; }
    input, select, button { width: 100%; padding: 10px; margin-top: 6px; box-sizing: border-box; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .msg { margin-top: 12px; color: #b00020; }
    button { cursor: pointer; margin-top: 16px; }
  </style>
</head>
<body>

<h1>Enter your information</h1>

<form id="infoForm">
  <label for="fullName">Name and surname</label>
  <input id="fullName" required />

  <div class="row">
    <div>
      <label for="age">Age</label>
      <input id="age" type="number" min="0" max="130" required />
    </div>
    <div>
      <label for="country">Country</label>
      <select id="country" required>
        <option value="" disabled selected>Select a country</option>
        <option>Albania</option><option>Andorra</option><option>Austria</option><option>Belarus</option>
        <option>Belgium</option><option>Bosnia and Herzegovina</option><option>Bulgaria</option><option>Croatia</option>
        <option>Cyprus</option><option>Czechia</option><option>Denmark</option><option>Estonia</option>
        <option>Finland</option><option>France</option><option>Germany</option><option>Greece</option>
        <option>Hungary</option><option>Iceland</option><option>Ireland</option><option>Italy</option>
        <option>Kosovo</option><option>Latvia</option><option>Liechtenstein</option><option>Lithuania</option>
        <option>Luxembourg</option><option>Malta</option><option>Moldova</option><option>Monaco</option>
        <option>Montenegro</option><option>Netherlands</option><option>North Macedonia</option><option>Norway</option>
        <option>Poland</option><option>Portugal</option><option>Romania</option><option>San Marino</option>
        <option>Serbia</option><option>Slovakia</option><option>Slovenia</option><option>Spain</option>
        <option>Sweden</option><option>Switzerland</option><option>Turkey</option><option>Ukraine</option>
        <option>United Kingdom</option><option>Vatican City</option>
      </select>
    </div>
  </div>

  <label for="address">Address</label>
  <input id="address" required />

  <div class="row">
    <div>
      <label for="zipcode">Zipcode / Postcode</label>
      <input id="zipcode" required />
    </div>
    <div>
      <label for="phone">Phone number</label>
      <input id="phone" type="tel" required placeholder="+44..." />
    </div>
  </div>

  <label for="notes">Write down 10 random numbers (your notes)</label>
  <input id="notes" inputmode="numeric" />

  <div id="msg" class="msg"></div>

  <button type="submit" id="submitBtn">Confirm</button>
</form>

<script>
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxPtsj3F2xCltFvE9UnM4XfkfLMeDlaFDtb-UNr7JRrarFeP0UyUqPvj3rz3J-AfVQi/exec";

  const form = document.getElementById("infoForm");
  const msg = document.getElementById("msg");
  const btn = document.getElementById("submitBtn");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    msg.textContent = "";

    const payload = {
      fullName: document.getElementById("fullName").value.trim(),
      age: document.getElementById("age").value.trim(),
      country: document.getElementById("country").value,
      address: document.getElementById("address").value.trim(),
      zipcode: document.getElementById("zipcode").value.trim(),
      phone: document.getElementById("phone").value.trim(),
      notes: document.getElementById("notes").value.trim()
    };

    btn.disabled = true;
    btn.textContent = "Sending...";

    try {
      const res = await fetch(WEB_APP_URL, {
        method: "POST",
        // text/plain helps avoid some CORS/preflight issues for static sites
        headers: { "Content-Type": "text/plain;charset=utf-8" },
        body: JSON.stringify(payload)
      });

      const json = await res.json();
      if (json.ok) {
        window.location.href = "thankyou.html";
      } else {
        msg.textContent = "Error saving data: " + (json.error || "Unknown error");
        btn.disabled = false;
        btn.textContent = "Confirm";
      }
    } catch (err) {
      msg.textContent = "Network error. Please try again.";
      btn.disabled = false;
      btn.textContent = "Confirm";
    }
  });
</script>

</body>
</html>
